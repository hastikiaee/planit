<!DOCTYPE html>
{% load static %}
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <link rel="icon" href="{% static 'media/title.ico'%}" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Vazir&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jalaali-js@1.1.1/dist/jalaali.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jdatetime@3.7.0/dist/jdatetime.min.js"></script>
  <link href="{% static "css/professor_style.css" %}" rel="stylesheet">
  <title>پنل مدیریت مدیر گروه</title>
</head>
<body>
  <header>
    <img src="{% static "media/logo.png" %}" alt="لوگو" class='logo'>
    <h1>پنل مدیریت مدیر گروه</h1>
  </header>

  <!-- سوئیچ دارک مود -->
  <div class="darkmode">
    <input type="checkbox" class="darkmode-checkbox" id="darkmode" />
    <label class="darkmode-label" for="darkmode">
      <i class="fas fa-moon"></i>
      <i class="fas fa-sun"></i>
      <div class="ball"></div>
    </label>
  </div>
  
  <!-- نویگیشن بار -->
  <nav id="nav">
    {% if full_name %}
      <div class="nav-buttons">
        <form action="{% url 'logout' %}" method="post">
          {% csrf_token %}
          <button type="submit">خروج</button>
        </form>
        <button onclick="switchTab('schedule')">چارت دروس</button>
        <button onclick="switchTab('examination')">چارت امتحانات</button>
        <button onclick="switchTab('confliction')">تداخلات</button>
        <button onclick="switchTab('communication')">ارتباطات</button>
      </div>
      <p><span class="welcome">سلام جناب دکتر </span>{{ full_name }}<span id="professor_name"></span></p>
    {% else %}
      <div class="nav-buttons">
        <button onclick="switchTab('schedule')">چارت دروس</button>
        <button onclick="switchTab('examination')">چارت امتحانات</button>
        <button onclick="switchTab('confliction')">تداخلات</button>
        <button onclick="switchTab('communication')">ارتباطات</button>
      </div>
    {% endif %}
    <button class="menu-toggle" onclick="toggleSidebar()">☰</button>
  </nav>
  <div id="spacer"></div>

  <!-- اسلاید بار -->
  <div class="sidebar" id="sidebar">
    <button class="sidebar-button" onclick="showSection('side_courses')">مدیریت دروس</button>
    <button class="sidebar-button" onclick="showSection('side_professors')">مدیریت اساتید</button>
    <button class="sidebar-button" onclick="showSection('side_availability')">مدیریت زمان آزاد اساتید</button>
    <button class="sidebar-button" onclick="showSection('side_schedule_chart')">مدیریت چارت دروس</button>
    <button class="sidebar-button" onclick="showSection('side_schedule')">چارت دروس</button>
    <button class="sidebar-button" onclick="showSection('side_examination_chart')">مدیریت چارت امتحانات</button>
    <button class="sidebar-button" onclick="showSection('side_examination')">چارت امتحانات</button>
    <button class="sidebar-button" onclick="showSection('side_confliction')">تداخلات</button>
    <button class="sidebar-button" onclick="showSection('side_changes')">تغییرات اخیر</button>
    <button class="sidebar-button" onclick="showSection('side_messages')">پیام‌ها</button>
    <button class="sidebar-button" onclick="showSection('side_supports')">دانشجویان پشتیبان</button>
 </div>

  <!-- مدیریت محتوا -->
  <div class="container">
    <!-- چارت دروس -->
    <div id="schedule" class="tab-content active">
      <!-- جدول چارت دروس -->
      <div id="side_schedule" class="section">
        <div class="select-major">
          <label for="major-select">انتخاب رشته: </label>
          <select id="major-select" class="major-select" onchange="showSchedule()">
            <option value="مهندسی کامپیوتر">مهندسی کامپیوتر</option>
            <option value="مهندسی صنایع">مهندسی صنایع</option>
            <option value="مهندسی شیمی">مهندسی شیمی</option>
            <option value="مهندسی نفت">مهندسی نفت</option>
          </select>
        </div>
        <table class="schedule-table">
          <thead>
            <tr>
              <th>روزها</th>
              <th>گروه</th>
              <th>08:00 08:30</th>
              <th>08:30 09:00</th>
              <th>09:00 09:30</th>
              <th>09:30 10:00</th>
              <th>10:00 10:30</th>
              <th>10:30 11:00</th>
              <th>11:00 11:30</th>
              <th>11:30 12:00</th>
              <th>12:00 12:30</th>
              <th>12:30 13:00</th>
              <th>13:00 13:30</th>
              <th>13:30 14:00</th>
              <th>14:00 14:30</th>
              <th>14:30 15:00</th>
              <th>15:00 15:30</th>
              <th>15:30 16:00</th>
              <th>16:00 16:30</th>
              <th>16:30 17:00</th>
              <th>17:00 17:30</th>
              <th>17:30 18:00</th>
            </tr>
            <tr id="empty-schedule-table">              
              <td colspan="22" style="text-align:center; color: black;">!هنوز چارت دروس ساخته نشده است</td>
            </tr>
          </thead>
          <tbody id="schedule-body"></tbody>
        </table>
      </div>

      <!-- مدیریت دروس -->
      <div id="side_courses" class="section">
        <div class="add-course-box">
          <h3>اضافه کردن درس</h3>
          <div class="form-section">
            <div>
              <!-- رشته درس -->
              <div>
                <label for="course_major">:رشته درس</label>
                <input type="text" id="course_major" value="{{ professor_major }}" readonly>
              </div>
            </div>
            <div>
              <!-- نوع درس -->
              <div>
                <label for="course_type">:نوع درس</label>
                <input type="text" id="course_type" placeholder="نوع درس را وارد کنید">
              </div>
              <!-- مدت کلاس -->
              <div>
                <label for="course_length">:مدت کلاس</label>
                <input type="number" id="course_length" class="time-box" placeholder="مدت کلاس را وارد کنید" step="0.5" required>
              </div>
            </div>
            <div>
              <!-- نام درس -->
              <div>
                <label for="course_name">:نام درس</label>
                <input type="text" id="course_name" placeholder="نام درس را وارد کنید">
              </div>
              <!-- تعداد روز ارائه درس -->
              <div>
                <label for="course_days">:تعداد روز ارائه</label>
                <input type="number" id="course_days" class="time-box" placeholder="تعداد روز را وارد کنید" step="1" required>
              </div>
            </div>
          </div>
          <div class="button-container">
            <button onclick="addCourse()">اضافه کردن درس</button>
            <button id="importCoursesCSV">CSV آپلود فایل</button>
          </div>

          <!-- جدول اطلاعات دروس -->
          <table id="courses-table">
            <thead>
              <tr>
                <th>عملیات</th>
                <th>مدت کلاس</th>
                <th>تعداد روز ارائه</th>
                <th>رشته درس</th>
                <th>نوع درس</th>
                <th>نام درس</th>
              </tr>
              <tr id="empty-courses-table">              
                <td colspan="6" style="text-align:center; color: black;">!هنوز درسی اضافه نشده است</td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <!-- دروس اینجا اضافه می‌شوند -->
              </tr>
            </tbody>
          </table>
          <div class="button-container">
            <button onclick="saveCourses()">ذخیره تغییرات</button>
          </div>
        </div>
      </div>

      <!-- مدیریت اساتید -->
      <div id="side_professors" class="section">
        <div class="add-professor-box">
          <h3>اضافه کردن استاد</h3>
          <div class="form-section">
            <div>
              <!-- شماره استادی -->
              <div>
                <label for="professor_number">:شماره استادی</label>
                <input type="text" id="professor_number" placeholder="شماره استادی را وارد کنید">
              </div>
              <!-- رشته تدریس -->
              <div>
                <label for="professor_major">:رشته تدریس</label>
                <input type="text" id="professor_major" class="time-box" value="{{ professor_major }}" readonly>
              </div>
            </div>
            <div>
              <!-- نام استاد -->
              <div>
                <label for="professor_namee">:نام استاد</label>
                <input type="text" id="professor_namee" placeholder="نام استاد را وارد کنید">
              </div>
              <!-- ایمیل استاد -->
              <div>
                <label for="professor_email">:ایمیل استاد</label>
                <input type="email" id="professor_email" class="time-box" placeholder="ایمیل استاد را وارد کنید" required>
              </div>
            </div>
          </div>
          <div class="button-container">
            <button id="add-professor-btn">اضافه کردن استاد</button>
            <button id="importProfessorsCSV">CSV آپلود فایل</button>
          </div>

          <!-- جدول اطلاعات اساتید -->
          <table id="professors-table">
            <thead>
              <tr>
                <th>عملیات</th>
                <th>رشته تدریس</th>
                <th>ایمیل استاد</th>
                <th>شماره استادی</th>
                <th>نام استاد</th>
              </tr>
              <tr id="empty-professors-table">              
                <td colspan="5" style="text-align:center; color: black;">!هنوز استادی اضافه نشده است</td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <!-- اساتید اینجا اضافه می‌شوند -->
              </tr>
            </tbody>
          </table>
          <div class="button-container">
            <button onclick="saveProfessors()">ذخیره تغییرات</button>
          </div>
        </div>
      </div>

      <!-- مدیریت زمان آزاد اساتید -->
      <div id="side_availability" class="section">
        <div class="add-availability-box">
          <h3>اضافه کردن زمان آزاد استاد</h3>
          <!-- جستجوی استاد -->
          <div class="professor-input-wrapper">
            <input id="professor-search-input" class="professor-input" placeholder="نام استاد را وارد کنید..." onkeyup="searchProfessor()">
            <button class="professor-search-btn" onclick="searchProfessors()">جستجو</button>
          </div>
          <ul id="professor-suggestions" class="list-group suggestions-list shadow-sm"></ul>
          <!-- جدول اطلاعات اساتید -->
          <table id="availability-table">
            <thead>
              <tr>
                <th>عملیات</th>
                <th>زمان پایان</th>
                <th>زمان شروع</th>
                <th>روز آزاد</th>
                <th>شماره استادی</th>
                <th>نام استاد</th>
              </tr>
              <tr id="empty-availability-table">              
                <td colspan="6" style="text-align:center; color: black;">!هنوز زمان آزادی ثبت نشده است</td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <!-- اساتید اینجا اضافه می‌شوند -->
              </tr>
            </tbody>
          </table>
          <div class="button-container">
            <button onclick="saveAvailability()">ذخیره تغییرات</button>
          </div>
        </div>
      </div>

      <!-- مدیریت چارت دروس -->
      <div id="side_schedule_chart" class="section">
        <div class="add-schedule-box">
          <h3>مدیریت چارت دروس</h3>
          <!-- مرتب سازی اطلاعات چارت -->
          <div class="sort-schedule">
            <label for="sort-select">مرتب سازی براساس: </label>
            <select id="sort-schedule-select" class="sort-select">
              <option value="day">روز هفته</option>
              <option value="professor">نام استاد</option>
              <option value="subject">نام درس</option>
              <option value="entry">ورودی</option>
            </select>
          </div>
          <!-- جدول اطلاعات چارت -->
          <table id="schedule-chart-table">
            <thead>
              <tr>
                <th>عملیات</th>
                <th>ورودی</th>
                <th>زمان پایان</th>
                <th>زمان شروع</th>
                <th>روزهای هفته</th>
                <th>نام استاد</th>
                <th>رشته</th>
                <th>نام درس</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <!-- اطلاعات چارت اینجا اضافه می‌شوند -->
              </tr>
            </tbody>
          </table>
          <div class="button-container">
            <button onclick="saveSchedule()">ذخیره تغییرات</button>
            <button onclick="updateSchedule()">به‌روزرسانی اطلاعات</button>
          </div>
        </div>
        <!-- ساختن برنامه -->
        <div class="button-finish">
          <button id="generate-schedule" onclick="generateSchedule()">ساختن برنامه دروس</button>
        </div>
      </div>
    </div>

    <!-- چارت امتحانات -->
    <div id="examination" class="tab-content">
      <!-- جدول چارت امتحانات -->
      <div id="side_examination" class="section">
        <table class="examination-table" id="examsTable">
          <thead>
              <tr>
                  <th>روز هفته</th>
                  <th>تاریخ امتحان</th>
                  <th>زمان امتحان</th>
                  <th>ورودی</th>
                  <th>رشته</th>
                  <th>نام استاد</th>
                  <th>نوع درس</th>
                  <th>نام درس</th>
              </tr>
          </thead>
          <tbody>
            <script>
              class jDate {
                constructor(year, month, day) {
                  this.year = parseInt(year);
                  this.month = parseInt(month);
                  this.day = parseInt(day);
                }
                toGregorian() {
                  let g = jalaliToGregorian(this.year, this.month, this.day);
                  return new Date(g.gy, g.gm - 1, g.gd);
                }
                static fromGregorian(date) {
                  let gYear = date.getFullYear();
                  let gMonth = date.getMonth() + 1;
                  let gDay = date.getDate();
                  let j = gregorianToJalali(gYear, gMonth, gDay);
                  return new jDate(j.jy, j.jm, j.jd);
                }
                addDays(n) {
                  let gDate = this.toGregorian();
                  gDate.setDate(gDate.getDate() + n);
                  return jDate.fromGregorian(gDate);
                }
                isBeforeOrEqual(other) {
                  if(this.year < other.year) return true;
                  if(this.year > other.year) return false;
                  if(this.month < other.month) return true;
                  if(this.month > other.month) return false;
                  return this.day <= other.day;
                }
                toString() {
                  return `${this.year}/${String(this.month).padStart(2,'0')}/${String(this.day).padStart(2,'0')}`;
                }
                getWeekday() {
                  let gDate = this.toGregorian();
                  return gDate.toLocaleDateString('fa-IR', { weekday: 'long' });
                }
              }
              function getExamDates(startStr, endStr) {
                let examDays = [];
            
                function parseJalali(str) {
                  let parts = str.split('/');
                  return new jDate(parts[0], parts[1], parts[2]);
                }
            
                let start = parseJalali(startStr);
                let end = parseJalali(endStr);
            
                let current = start;
                while(current.isBeforeOrEqual(end)) {
                  let weekday = current.getWeekday();
                  if (weekday !== "جمعه") {
                    examDays.push({ day: weekday, date: current.toString() });
                  }
                  current = current.addDays(1);
                }
                return examDays;
              }
              const examTimes = ["09:00-11:00", "09:00-11:00", "13:30-15:30", "13:30-15:30"];
              function renderExamTable() {
                const startDate = document.getElementById('start_date').value.trim();
                const endDate = document.getElementById('end_date').value.trim();
            
                if (!startDate || !endDate) {
                  alert("لطفا تاریخ شروع و پایان را وارد کنید");
                  return;
                }
            
                let examDays;
                try {
                  examDays = getExamDates(startDate, endDate);
                } catch {
                  alert("فرمت تاریخ‌ها باید به شکل yyyy/mm/dd باشد.");
                  return;
                }
            
                const tbody = document.querySelector("#examsTable tbody");
                tbody.innerHTML = ""; 
            
                examDays.forEach(({ day, date }) => {
                  examTimes.forEach((time, index) => {
                    const tr = document.createElement('tr');
                    if(index === 0) {
                      const tdDay = document.createElement('td');
                      tdDay.rowSpan = 4;
                      tdDay.textContent = day;
                      tr.appendChild(tdDay);
            
                      const tdDate = document.createElement('td');
                      tdDate.rowSpan = 4;
                      tdDate.textContent = date;
                      tr.appendChild(tdDate);
                    }
            
                    const tdTime = document.createElement('td');
                    tdTime.textContent = time;
                    tr.appendChild(tdTime);
            
                    for(let i=0; i<5; i++) {
                      const tdEmpty = document.createElement('td');
                      tr.appendChild(tdEmpty);
                    }
            
                    tbody.appendChild(tr);
                  });
                });
              }
              document.getElementById('generate-examination').addEventListener('click', () => {
                renderExamTable();
              });
            </script>
          </tbody>
        </table>
      </div>

      <!-- مدیریت چارت امتحانات -->
      <div id="side_examination_chart" class="section">
        <div class="add-exam-box">
          <h3>مدیریت چارت امتحانات</h3>
          <!-- انتخاب تاریخ شروع و پایان برنامه امتحانات -->
          <div class="form-section">
              <div class="date-pickers">
                <label for="end_date">:تاریخ پایان امتحانات</label>
                <input id="end_date" placeholder="مثال: 1404/05/30" />
              </div>
              <div class="date-pickers">
                <label for="start_date">:تاریخ شروع امتحانات</label>
                <input id="start_date" placeholder="مثال: 1404/05/11" />
              </div>
          </div>
          <!-- مرتب سازی اطلاعات چارت -->
          <div class="sort-examination">
            <label for="sort-select">مرتب سازی براساس: </label>
            <select id="sort-examination-select" class="sort-select">
              <option value="subject">نام درس</option>
              <option value="professor">نام استاد</option>
              <option value="entry">ورودی</option>
              <option value="exam_time">زمان امتحان</option>
              <option value="exam_date">تاریخ امتحان</option>
            </select>
          </div>
          <!-- جدول اطلاعات چارت -->
          <table id="examination-chart-table">
            <thead>
              <tr>
                <th>عملیات</th>
                <th>روز هفته</th>
                <th>تاریخ امتحان</th>
                <th>زمان امتحان</th>
                <th>ورودی</th>
                <th>رشته</th>
                <th>نام استاد</th>
                <th>نوع درس</th>
                <th>نام درس</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <!-- اطلاعات چارت اینجا اضافه می‌شوند -->
              </tr>
            </tbody>
          </table>
          <div class="button-container">
            <button onclick="saveExamination()">ذخیره تغییرات</button>
          </div>
        </div>
        <!-- ساختن برنامه -->
        <div class="button-finish">
          <button id="generate-examination" onclick="generateExamination()">ساختن برنامه امتحانات</button>
        </div>
      </div>
    </div>

    <!-- تداخلات -->
    <div id="confliction" class="tab-content">
      <div id="side_confliction" class="section">
        <!-- بخش اضافه کردن تداخلات -->
        <div class="add-conflict-box">
          <h3>اضافه کردن تداخل</h3>
          <div class="form-section">
            <!-- تداخل درس یا امتحان -->
            <div>
              <label for="conflict_type">:نوع تداخل</label>
              <select id="conflict_type" class="time-box">
                  <option value="درس">درس</option>
                  <option value="امتحان">امتحان</option>
              </select>
            </div>
            <!-- روز تداخل -->
            <div>
              <label for="conflict_days">:روز تداخل</label>
              <select id="conflict_days" class="time-box">
                <option value="شنبه">شنبه</option>
                <option value="یکشنبه">یکشنبه</option>
                <option value="دوشنبه">دوشنبه</option>
                <option value="سه‌شنبه">سه‌شنبه</option>
                <option value="چهارشنبه">چهارشنبه</option>
                <option value="پنج‌شنبه">پنج‌شنبه</option>
                <option value="هر دوروز">هر دو روز</option>
            </select>
            </div>
            <!-- درس دوم -->
            <div>
              <label for="conflict_subject_two">:درس دوم</label>
              <select id="conflict_subject_two" class="time-box">
                {% for subject in subject_list %}
                  <option value="{{ subject }}">{{ subject }}</option>
                {% endfor %}
              </select>
            </div>
            <!-- درس اول -->
            <div>
              <label for="conflict_subject_one">:درس اول</label>
              <select id="conflict_subject_one" class="time-box">
                {% for subject in subject_list %}
                  <option value="{{ subject }}">{{ subject }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
          <div class="button-container" onclick="addConflict()">
            <button>اضافه کردن تداخل</button>
          </div>

          <!-- جدول تداخلات -->
          <div class="sort-conflicts">
            <label for="sort-select">مرتب سازی براساس: </label>
            <select id="sort-conflicts-select" class="sort-select">
              <option value="day">روز تداخل</option>
              <option value="type">نوع تداخل</option>
              <option value="quantity">تعداد</option>
              <option value="quantityAndType">تعداد و نوع تداخل</option>
            </select>
          </div>
          <table id="conflicts-table">
            <thead>
              <tr>
                <th>عملیات</th>
                <th>وضعیت برطرف شدن</th>
                <th>تعداد</th>
                <th>نوع تداخل</th>
                <th>روز تداخل</th>
                <th>درس دوم</th>
                <th>درس اول</th>
              </tr>
              <tr id="empty-conflicts-table">              
                <td colspan="7" style="text-align:center; color: black;">!هنوز تداخلی ثبت نشده است</td>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
          <div class="button-container">
            <button onclick="saveConflicts()">ذخیره تغییرات</button>
          </div>
          <div class="sort-solve">
            <label for="sort-select">مرتب سازی براساس: </label>
            <select id="sort-solve-select" class="sort-select">
              <option value="type">نوع تداخل</option>
              <option value="day">روز هفته</option>
            </select>
          </div>
          <table id="solve-table">
            <thead>
              <tr>
                <th>عملیات</th>
                <th>بازه‌های پیشنهادی</th>
                <th>تاریخ</th>
                <th>روز</th>
                <th>درس تغییر کرده</th>
                <th>نوع تداخل</th>
                <th>تداخل</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        </div>

        <!-- پیشنهادات برای رفع تداخلات -->
        <div class="button-finish">
          <button id="solve-confliction" onclick="solveScheduleConfliction();">پیشنهاد برای رفع تداخل درسی</button>
          <button id="solve-confliction" onclick="solveExaminationConfliction();">پیشنهاد برای رفع تداخل امتحانی</button>
        </div>
      </div>
    </div>

    <!-- ارتباطات -->
    <div id="communication" class="tab-content">
      <!-- پیام‌ها -->
      <div class="add-message-box">
        <h3>پیام‌های دریافتی</h3>
        <div class="messages-wrapper">
          <!-- چت خصوصی -->
          <div id="side_private" class="section">
            {% if full_name %}
              <div class="chat-container" id="chatContainer" style="display: block;">
                  <div class="chat-header"></div>
                  <div class="chat-box" id="private">
                      <!-- پیام‌ها اینجا اضافه می‌شوند -->
                  </div>
                  <div class="chat-input">
                      <div id="pickerContainer">
                        <button id="togglePickerBtn" style="font-size: 21px; padding-top: 3px; padding-bottom: 4px;">😊</button>
                        <div id="emojiPicker"></div>
                      </div>
                      <input type="text" id="messageInputPrivate" placeholder="پیام خود را بنویسید...">
                      <button onclick="sendPrivateMessage()">ارسال</button>
                  </div>
              </div>
            {% endif %}
          </div>
          
          <div id="side_messages" class="section">
            <!-- جستجوی استاد -->
            <div class="professor-input-wrapper">
              <input id="professor-search-message" class="professor-input" placeholder="نام استاد را وارد کنید..." onkeyup="messageProfessor()">
              <button class="professor-search-btn" onclick="messageProfessor()">جستجو</button>
            </div>
            <ul id="professor-suggestions-message" class="list-group suggestions-list shadow-sm"></ul>
            <div id="contacts-list"><!-- مخاطبین اینجا اضافه می‌شوند --></div>
          </div>
        </div>
      </div>

      <!-- تغییرات اخیر -->
      <div id="side_changes" class="section">
        <div class="add-change-box">
          <h3>تغییرات اخیر</h3>
          <!-- تغییرات موجود -->
          <div id="change-messages">
          </div>
          <!-- ورودی برای تغییر جدید -->
          <div class="change-input-wrapper">
            <button class="change-submit-btn" onclick="addChange()">اضافه کردن تغییر</button>
            <input id="new-change-text" class="change-input" placeholder="تغییر جدید را وارد کنید...">
          </div>
        </div>
      </div>

      <!-- دانشجویان پشتیبان -->
      <div id="side_supports" class="section">
        <div class="add-support-box">
          <h3>دانشجویان پشتیبان</h3>
          <div class="support-input-wrapper">
            <input id="student-search-input" class="support-input" placeholder="نام دانشجو را وارد کنید..." onkeyup="searchStudent()">
            <button class="support-search-btn" onclick="searchStudent()">جستجو</button>
          </div>
          <ul id="student-suggestions" class="list-group suggestions-list shadow-sm"></ul>

          <!-- جدول اطلاعات دانشجویان پشتیبان -->
          <table id="supports-table">
            <thead>
              <tr>
                <th>عملیات</th>
                <th>ورودی</th>
                <th>رشته تحصیلی</th>
                <th>ایمیل</th>
                <th>شماره دانشجویی</th>
                <th>نام دانشجو</th>
              </tr>
              <tr id="empty-supports-table">              
                <td colspan="6" style="text-align:center; color: black;">!هنوز دانشجوی پشتیبانی ثبت نشده است</td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <!-- دانشجویان پشتیبان اینجا اضافه می‌شوند -->
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</body>
<script>
  let professorName = "{{ full_name }}";
  let professorMajor = "{{ professor_major }}";
  
</script>
<script src="{% static 'js/faculty_script.js'%}"></script>
<script type="module">
  import { createPicker } from 'https://cdn.skypack.dev/picmo';

  const pickerContainer = document.getElementById('emojiPicker');
  const toggleBtn = document.getElementById('togglePickerBtn');
  const messageInput = document.getElementById('messageInputPrivate');

  const picker = createPicker({ rootElement: pickerContainer });

  pickerContainer.style.display = 'none';

  toggleBtn.addEventListener('click', () => {
    if (pickerContainer.style.display === 'none') {
      pickerContainer.style.display = 'block';
    } else {
      pickerContainer.style.display = 'none';
    }
  });

  picker.addEventListener('emoji:select', event => {
    messageInput.value += event.emoji;
    messageInput.focus();
  });

</script>
</html>
